#!/bin/bash
echo "Running Biome on staged files..."

# Check and fix staged files
pnpm exec biome check --write --staged --no-errors-on-unmatched --files-ignore-unknown=true

# Re-stage any files that were modified
git update-index --again

echo "Biome check complete!"

# Run CodeScene if installed
if command -v cs &> /dev/null; then
  echo "Running CodeScene delta analysis..."
  if ! cs delta --staged; then
    echo ""
    echo "⚠️  CodeScene found code health issues (warning only, not blocking commit)"
  fi
  echo "CodeScene check complete!"
fi
